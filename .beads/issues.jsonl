{"id":"rem-52x","title":"Close V1 parity gaps after Phase 2","description":"Gap-closure epic after merged PR #6 (`ef3e802`, branch `codex/rem-phase2-complete`).\n\nContext from docs:\n- `docs/prd.md` V1 scope requires optional API token security, complete interface parity, and trustworthy humanâ†”agent review UX.\n- `docs/design.md` defines API contract details, richer status observability, and UI responsibilities for proposal review/editor fidelity.\n\nPhase 2 delivered drafts/plugins/events/proposals/filtering interfaces, but several V1 parity items remain. This epic tracks the remaining work as verifiable issues.","design":"Gap analysis basis:\n1) PR #6 changed interfaces but did not add API token enforcement.\n2) API route set lacks full design-doc parity for note update semantics.\n3) Search filters currently support tags/time only, not note-type/plugin facets.\n4) Status endpoint lacks richer operational observability fields from design guidance.\n5) UI proposal review is functional but not yet section-context rich.\n6) UI editor shell is still textarea-based rather than Lexical plugin-host baseline.","acceptance_criteria":"- All child issues in this epic are closed with passing tests and updated docs.\n- API/CLI/reference docs match implemented behavior with no stale endpoint examples.\n- `bun run test`, `bun run typecheck`, and `bun run lint` pass on the final branch.","status":"closed","priority":1,"issue_type":"epic","created_at":"2026-02-06T23:11:49.023469-06:00","created_by":"erikjohansson","updated_at":"2026-02-06T23:33:53.658381-06:00","closed_at":"2026-02-06T23:33:53.658381-06:00","close_reason":"Epic implemented for current scope; auth item explicitly deferred by product decision"}
{"id":"rem-52x.1","title":"API: optional token auth for localhost server","description":"Implement optional API token enforcement for localhost HTTP API when configured.\n\nRequirements\n- Add REM_API_TOKEN support in API server.\n- When token is configured, requests without Authorization: Bearer \u003ctoken\u003e are rejected.\n- Keep behavior unchanged when token is unset.\n- Keep localhost-only defaults and existing CORS behavior intact.\n- Return a stable 401 error payload for auth failures.\n","design":"PRD NFR 8.3 and design section 12 require optional API token auth. Current API only enforces localhost binding/CORS.","acceptance_criteria":"- With REM_API_TOKEN set, missing token requests return 401 with stable error code/message.\n- With REM_API_TOKEN set, incorrect bearer token requests return 401.\n- With REM_API_TOKEN set, valid bearer token requests succeed on read/write endpoints.\n- With token unset, existing clients continue to work unchanged.\n- API tests cover success/failure auth paths and docs mention configuration + behavior.","notes":"Dependency review complete: issue remains parallelizable with rem-x2x.1/rem-x2x.2/rem-x2x.3 and is a blocker for final release-gate rem-x2x.5.","status":"closed","priority":1,"issue_type":"feature","created_at":"2026-02-06T23:11:49.170372-06:00","created_by":"erikjohansson","updated_at":"2026-02-06T23:54:49.421298-06:00","closed_at":"2026-02-06T23:54:49.421298-06:00","close_reason":"Implemented optional REM_API_TOKEN bearer auth middleware, added API auth contract tests, and updated API/runbook docs.","labels":["api","security","v1","v1-hardening"],"dependencies":[{"issue_id":"rem-52x.1","depends_on_id":"rem-x2x","type":"parent-child","created_at":"2026-02-06T23:50:02.103039-06:00","created_by":"erikjohansson"}]}
{"id":"rem-x2x","title":"V1.0 completion: close remaining parity gaps","description":"Context\n- MRs #2 through #7 delivered most of V1 parity and all quality gates currently pass on main.\n- Review against docs/prd.md and docs/design.md identified residual V1 contract gaps.\n- This epic closes those gaps so V1 can be declared complete against written requirements.\n\nScope\n- Optional API token auth on localhost API.\n- End-to-end actor provenance parity for note writes (human vs agent identity).\n- Search parity for created-time range filters (in addition to updated-time).\n- Durable section identity semantics that remain stable through heading text/path edits.\n- Migration/backfill behavior for existing canonical notes and proposal targeting compatibility.\n- Contract-test and docs updates so behavior is explicit and verifiable.\n\nOut of Scope\n- Embeddings/vector search.\n- New proposal UX paradigms beyond current v1 review model.\n- Multi-device sync or cloud-hosting changes.\n\nDependency and Execution Plan\n- Parallel track A: rem-52x.1 (API token auth).\n- Parallel track B: rem-x2x.1 (provenance parity).\n- Parallel track C: rem-x2x.2 (created-time search filters).\n- Sequential track D-\u003eE: rem-x2x.3 (durable section identity) then rem-x2x.4 (migration/backfill).\n- Final gate: rem-x2x.5 runs after A/B/C/E are closed and captures final docs + contract verification.\n\nExecution Notes\n- Child issues must land with green lint/typecheck/test.\n- Schema/event contract changes must update docs in the same PR.\n- Keep issue boundaries strict to avoid scope bleed between section-identity redesign and migration work.\n","acceptance_criteria":"- All child issues in this epic are closed with passing quality gates.\n- API/CLI references and runbook document final behavior for all changed interfaces.\n- PRD/design deltas are resolved in code or explicitly documented as out-of-scope with rationale.\n- Final verification task rem-x2x.5 records objective evidence (commands/tests) for release readiness.\n- `bd ready` shows no open P1 issues tied to this epic.","status":"closed","priority":1,"issue_type":"epic","created_at":"2026-02-06T23:49:27.056014-06:00","created_by":"erikjohansson","updated_at":"2026-02-07T00:21:00.645357-06:00","closed_at":"2026-02-07T00:21:00.645357-06:00","close_reason":"All V1 parity gap child issues completed and validated.","labels":["parity-gap","v1","v1-hardening"]}
{"id":"rem-x2x.1","title":"Provenance parity: support agent-authored note writes via API/CLI","description":"Problem\n- Note writes currently stamp human actors in API/CLI save flows, which breaks V1 provenance parity for agent-authored note creation.\n\nRequirements\n- API note write endpoints must accept optional actor payload for note writes.\n- CLI note save flow must support passing actor identity for automation/harness use.\n- Validation must enforce existing actor contract (agent actors require id).\n- Default behavior for human/manual usage should remain ergonomic.\n- Event payloads and note metadata must reflect the submitted actor consistently.\n\nImplementation Guidance\n- Keep backward compatibility for existing note save payloads.\n- Avoid changing proposal actor semantics (already agent-only creation + human review).\n","acceptance_criteria":"- API POST /notes and PUT /notes/:id accept actor input and persist actor in note meta and events.\n- CLI note save supports explicit actor input and persists it correctly.\n- Agent actor without id is rejected with a clear validation error.\n- Existing note-save clients that omit actor continue to work.\n- Tests validate human and agent write paths plus error cases.","status":"closed","priority":1,"issue_type":"feature","created_at":"2026-02-06T23:50:02.248335-06:00","created_by":"erikjohansson","updated_at":"2026-02-07T00:21:00.23108-06:00","closed_at":"2026-02-07T00:21:00.23108-06:00","close_reason":"Implemented API/CLI note actor passthrough with validation and contract tests.","labels":["api","cli","core","provenance","v1","v1-hardening"],"dependencies":[{"issue_id":"rem-x2x.1","depends_on_id":"rem-x2x","type":"parent-child","created_at":"2026-02-06T23:50:02.249452-06:00","created_by":"erikjohansson"}]}
{"id":"rem-x2x.2","title":"Search parity: add created-time range filters across API/CLI/Core/Index","description":"Problem\n- V1 docs require basic updated/created time-range filtering, but current API/CLI/index implementation only exposes updated-time filters.\n\nRequirements\n- Add created-time range filters end-to-end:\n  - API query params for search.\n  - CLI flags for search.\n  - Core search input fields.\n  - SQLite search predicate support.\n- Preserve existing updated-time, tag, noteType, and plugin namespace filter behavior.\n- Keep filter behavior deterministic and composable when multiple filters are combined.\n","acceptance_criteria":"- API search supports created-time lower/upper bounds and returns filtered results correctly.\n- CLI search exposes created-time flags and forwards them correctly.\n- Combined filtering (created + updated + tags + noteType + plugin namespace) behaves as expected.\n- Existing searches without created filters are unchanged.\n- Tests cover positive and negative cases for created-range filtering.","status":"closed","priority":1,"issue_type":"feature","created_at":"2026-02-06T23:50:02.390597-06:00","created_by":"erikjohansson","updated_at":"2026-02-07T00:21:00.318869-06:00","closed_at":"2026-02-07T00:21:00.318869-06:00","close_reason":"Added createdSince/createdUntil search filters across index/core/api/cli with tests.","labels":["api","cli","index","search","v1","v1-hardening"],"dependencies":[{"issue_id":"rem-x2x.2","depends_on_id":"rem-x2x","type":"parent-child","created_at":"2026-02-06T23:50:02.392485-06:00","created_by":"erikjohansson"}]}
{"id":"rem-x2x.3","title":"Section identity durability: persist stable IDs beyond heading-path hashes","description":"Problem\n- Current section IDs are derived from heading-path hashes, so section IDs can drift when heading text/path changes.\n- V1 contract requires stable section IDs with fallback paths.\n\nRequirements\n- Make section IDs durable across heading text/path edits for existing sections.\n- Keep fallback path as secondary locator/debug aid, not the primary identity source.\n- Ensure section index generation prefers persisted canonical section identity where available.\n- Ensure proposal targeting by sectionId remains valid through non-destructive heading edits.\n- Preserve deterministic behavior for newly created sections.\n\nScope Boundary\n- This issue covers identity model + runtime behavior for new/edited notes.\n- Legacy corpus migration/backfill is intentionally handled in rem-x2x.4.\n\nConstraints\n- Do not break existing note/proposal schema compatibility.\n- Keep acceptance/rejection proposal flows intact.\n","acceptance_criteria":"- Renaming or re-parenting headings does not change sectionId for unchanged sections.\n- New sections receive new unique section IDs.\n- Proposal acceptance targeting by sectionId continues to resolve after heading text/path edits.\n- Fallback path resolution still works when needed.\n- Tests cover section-id stability and proposal-target continuity scenarios.","notes":"Blocker review: rem-x2x.4 remains the only direct dependent to keep migration sequencing explicit.","status":"closed","priority":1,"issue_type":"feature","created_at":"2026-02-06T23:50:02.535557-06:00","created_by":"erikjohansson","updated_at":"2026-02-07T00:21:00.401057-06:00","closed_at":"2026-02-07T00:21:00.401057-06:00","close_reason":"Implemented durable section identity carry-forward across heading/path edits and insertion scenarios with tests.","labels":["core","extractor","proposals","v1","v1-hardening"],"dependencies":[{"issue_id":"rem-x2x.3","depends_on_id":"rem-x2x","type":"parent-child","created_at":"2026-02-06T23:50:02.536712-06:00","created_by":"erikjohansson"}]}
{"id":"rem-x2x.4","title":"Migration/backfill: upgrade existing notes to durable section identity model","description":"Problem\n- Existing canonical notes may not carry durable section identity metadata needed by the updated section-id model.\n\nRequirements\n- Define and implement an upgrade path for existing note corpus to the durable section-id model.\n- Ensure migration/backfill is safe for local-first stores and replay/rebuild workflows.\n- Ensure existing open proposals remain reviewable even when target note sections are upgraded.\n- Document operational guidance and rollback/recovery expectations.\n\nDependency Context\n- This issue is intentionally blocked by rem-x2x.3.\n- It should only start after durable section identity behavior is implemented and tests are stable.\n\nConstraints\n- No destructive data loss in canonical files.\n- Rebuild-index workflows must remain reliable.\n","acceptance_criteria":"- Existing notes are upgraded/backfilled to the durable section-id model via documented workflow.\n- Rebuild/index flows remain successful after migration.\n- Existing proposals remain resolvable by sectionId or fallback path after migration.\n- Migration behavior is covered by automated tests with legacy fixtures.\n- Runbook includes operator instructions for migration/backfill verification.","status":"closed","priority":1,"issue_type":"task","created_at":"2026-02-06T23:50:02.681711-06:00","created_by":"erikjohansson","updated_at":"2026-02-07T00:21:00.483374-06:00","closed_at":"2026-02-07T00:21:00.483374-06:00","close_reason":"Added section identity migration/backfill workflows via core, CLI, API with migration event coverage and docs.","labels":["core","index","migration","v1","v1-hardening"],"dependencies":[{"issue_id":"rem-x2x.4","depends_on_id":"rem-x2x","type":"parent-child","created_at":"2026-02-06T23:50:02.682842-06:00","created_by":"erikjohansson"},{"issue_id":"rem-x2x.4","depends_on_id":"rem-x2x.3","type":"blocks","created_at":"2026-02-06T23:50:02.930477-06:00","created_by":"erikjohansson"}]}
{"id":"rem-x2x.5","title":"Contract verification + docs sync for v1 hardening epic","description":"Goal\n- Close the loop on contracts and release confidence for this epic.\n\nRequirements\n- Add/extend contract tests for:\n  - API token auth behavior.\n  - Actor provenance on note writes.\n  - Created-time search filters.\n  - Section identity durability + migration/backfill behavior.\n- Update docs (docs/api-cli-reference.md, docs/runbook.md, docs/data-contracts.md) for all changed behavior.\n- Produce explicit verification evidence (commands + test outcomes) suitable for release handoff.\n\nDependency Context\n- This is the epic release-gate task and should execute last.\n- It remains blocked by rem-52x.1, rem-x2x.1, rem-x2x.2, rem-x2x.3, rem-x2x.4.\n","acceptance_criteria":"- Automated tests cover all four gap areas and pass in CI/local suite.\n- API/CLI/runbook/data-contract docs are synchronized with shipped behavior.\n- A short release verification checklist for this epic is present in docs.\n- Verification evidence includes at minimum: lint, typecheck, test, and representative API/CLI smoke checks.\n- No remaining undocumented behavior changes in touched surfaces.","status":"closed","priority":1,"issue_type":"task","created_at":"2026-02-06T23:50:02.826602-06:00","created_by":"erikjohansson","updated_at":"2026-02-07T00:21:00.565239-06:00","closed_at":"2026-02-07T00:21:00.565239-06:00","close_reason":"Expanded contract coverage (auth/provenance/created-filters/section migration) and synchronized docs plus verification evidence.","labels":["docs","tests","v1","v1-hardening"],"dependencies":[{"issue_id":"rem-x2x.5","depends_on_id":"rem-x2x","type":"parent-child","created_at":"2026-02-06T23:50:02.827429-06:00","created_by":"erikjohansson"},{"issue_id":"rem-x2x.5","depends_on_id":"rem-52x.1","type":"blocks","created_at":"2026-02-06T23:50:03.034899-06:00","created_by":"erikjohansson"},{"issue_id":"rem-x2x.5","depends_on_id":"rem-x2x.1","type":"blocks","created_at":"2026-02-06T23:50:03.140118-06:00","created_by":"erikjohansson"},{"issue_id":"rem-x2x.5","depends_on_id":"rem-x2x.2","type":"blocks","created_at":"2026-02-06T23:50:03.245819-06:00","created_by":"erikjohansson"},{"issue_id":"rem-x2x.5","depends_on_id":"rem-x2x.3","type":"blocks","created_at":"2026-02-06T23:50:03.348428-06:00","created_by":"erikjohansson"},{"issue_id":"rem-x2x.5","depends_on_id":"rem-x2x.4","type":"blocks","created_at":"2026-02-06T23:50:03.456552-06:00","created_by":"erikjohansson"}]}
{"id":"rem-zth","title":"Add light/dark/system theme setting","status":"closed","priority":2,"issue_type":"feature","created_at":"2026-02-08T20:34:17.34174-06:00","created_by":"erikjohansson","updated_at":"2026-02-08T20:36:49.597959-06:00","closed_at":"2026-02-08T20:36:49.597959-06:00","close_reason":"Closed"}
